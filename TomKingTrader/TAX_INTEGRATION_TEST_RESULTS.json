{
  "summary": {
    "totalTests": 5,
    "passedTests": 3,
    "passRate": 60,
    "integrationSuccess": false
  },
  "categories": [
    {
      "name": "Integration Tests",
      "results": [
        {
          "test": "Position Manager Integration",
          "passed": false,
          "error": "Cannot read properties of undefined (reading 'toUpperCase')"
        },
        {
          "test": "Risk Manager Integration",
          "passed": true,
          "details": {
            "originalRiskScore": 55,
            "taxOptimizationScore": 74,
            "combinedAnalysis": true,
            "recommendations": 2
          }
        }
      ]
    },
    {
      "name": "Performance Tests",
      "results": [
        {
          "test": "Performance and Scalability",
          "passed": true,
          "details": {
            "testCases": 3,
            "averageDuration": 1,
            "results": [
              {
                "positionCount": 10,
                "description": "Small portfolio",
                "duration": 1,
                "passed": true,
                "score": 57,
                "recommendations": 2
              },
              {
                "positionCount": 50,
                "description": "Medium portfolio",
                "duration": 1,
                "passed": true,
                "score": 47,
                "recommendations": 3
              },
              {
                "positionCount": 100,
                "description": "Large portfolio",
                "duration": 1,
                "passed": true,
                "score": 48,
                "recommendations": 3
              }
            ]
          }
        }
      ]
    },
    {
      "name": "Recommendation Tests",
      "results": [
        {
          "test": "Tom King Strategy Tax Optimization",
          "passed": false,
          "details": {
            "strategiesTested": 4,
            "averageOptimization": 75,
            "results": [
              {
                "strategy": "0DTE",
                "recommendations": [
                  {
                    "symbol": "SPX",
                    "section1256": true,
                    "recommendation": "KEEP",
                    "taxAdvantage": "60/40 treatment",
                    "estimatedSavings": "~17% tax savings"
                  },
                  {
                    "symbol": "SPXW",
                    "section1256": true,
                    "recommendation": "KEEP",
                    "taxAdvantage": "60/40 treatment",
                    "estimatedSavings": "~17% tax savings"
                  }
                ],
                "section1256Ratio": 1,
                "optimizationScore": 100,
                "preferredInstruments": [
                  "SPX",
                  "SPXW"
                ]
              },
              {
                "strategy": "LT112",
                "recommendations": [
                  {
                    "symbol": "ES",
                    "section1256": true,
                    "recommendation": "KEEP",
                    "taxAdvantage": "60/40 treatment",
                    "estimatedSavings": "~17% tax savings"
                  },
                  {
                    "symbol": "MES",
                    "section1256": true,
                    "recommendation": "KEEP",
                    "taxAdvantage": "60/40 treatment",
                    "estimatedSavings": "~17% tax savings"
                  }
                ],
                "section1256Ratio": 1,
                "optimizationScore": 100,
                "preferredInstruments": [
                  "ES",
                  "MES"
                ]
              },
              {
                "strategy": "STRANGLE",
                "recommendations": [
                  {
                    "symbol": "ES",
                    "section1256": true,
                    "recommendation": "KEEP",
                    "taxAdvantage": "60/40 treatment",
                    "estimatedSavings": "~17% tax savings"
                  },
                  {
                    "symbol": "GC",
                    "section1256": true,
                    "recommendation": "KEEP",
                    "taxAdvantage": "60/40 treatment",
                    "estimatedSavings": "~17% tax savings"
                  },
                  {
                    "symbol": "CL",
                    "section1256": true,
                    "recommendation": "KEEP",
                    "taxAdvantage": "60/40 treatment",
                    "estimatedSavings": "~17% tax savings"
                  }
                ],
                "section1256Ratio": 1,
                "optimizationScore": 100,
                "preferredInstruments": [
                  "ES",
                  "GC",
                  "CL"
                ]
              },
              {
                "strategy": "IPMCC",
                "recommendations": [
                  {
                    "symbol": "SPY",
                    "section1256": false,
                    "recommendation": "SWITCH",
                    "taxAdvantage": "Regular treatment",
                    "estimatedSavings": "No tax advantage"
                  },
                  {
                    "symbol": "QQQ",
                    "section1256": false,
                    "recommendation": "SWITCH",
                    "taxAdvantage": "Regular treatment",
                    "estimatedSavings": "No tax advantage"
                  }
                ],
                "section1256Ratio": 0,
                "optimizationScore": 0,
                "preferredInstruments": []
              }
            ]
          }
        }
      ]
    },
    {
      "name": "Compliance Tests",
      "results": [
        {
          "test": "Compliance and Accuracy",
          "passed": true,
          "details": {
            "testCases": 3,
            "passRate": 100,
            "results": [
              {
                "name": "Section 1256 Classification Accuracy",
                "passed": true,
                "accuracy": 100,
                "details": "6/6 correct classifications"
              },
              {
                "name": "Wash Sale Detection Accuracy",
                "passed": true,
                "details": "Detected 1 wash sale violations",
                "expectedViolations": 1,
                "actualViolations": 1
              },
              {
                "name": "UK Tax Calculation Accuracy",
                "passed": true,
                "details": "£6090 gains, 80% allowance used",
                "withinAllowance": false
              }
            ]
          }
        }
      ]
    }
  ],
  "findings": {
    "integrationSuccess": false,
    "performanceSuccess": true,
    "complianceSuccess": true
  },
  "results": {
    "integrationTests": [
      {
        "test": "Position Manager Integration",
        "passed": false,
        "error": "Cannot read properties of undefined (reading 'toUpperCase')"
      },
      {
        "test": "Risk Manager Integration",
        "passed": true,
        "details": {
          "originalRiskScore": 55,
          "taxOptimizationScore": 74,
          "combinedAnalysis": true,
          "recommendations": 2
        }
      }
    ],
    "performanceTests": [
      {
        "test": "Performance and Scalability",
        "passed": true,
        "details": {
          "testCases": 3,
          "averageDuration": 1,
          "results": [
            {
              "positionCount": 10,
              "description": "Small portfolio",
              "duration": 1,
              "passed": true,
              "score": 57,
              "recommendations": 2
            },
            {
              "positionCount": 50,
              "description": "Medium portfolio",
              "duration": 1,
              "passed": true,
              "score": 47,
              "recommendations": 3
            },
            {
              "positionCount": 100,
              "description": "Large portfolio",
              "duration": 1,
              "passed": true,
              "score": 48,
              "recommendations": 3
            }
          ]
        }
      }
    ],
    "recommendationTests": [
      {
        "test": "Tom King Strategy Tax Optimization",
        "passed": false,
        "details": {
          "strategiesTested": 4,
          "averageOptimization": 75,
          "results": [
            {
              "strategy": "0DTE",
              "recommendations": [
                {
                  "symbol": "SPX",
                  "section1256": true,
                  "recommendation": "KEEP",
                  "taxAdvantage": "60/40 treatment",
                  "estimatedSavings": "~17% tax savings"
                },
                {
                  "symbol": "SPXW",
                  "section1256": true,
                  "recommendation": "KEEP",
                  "taxAdvantage": "60/40 treatment",
                  "estimatedSavings": "~17% tax savings"
                }
              ],
              "section1256Ratio": 1,
              "optimizationScore": 100,
              "preferredInstruments": [
                "SPX",
                "SPXW"
              ]
            },
            {
              "strategy": "LT112",
              "recommendations": [
                {
                  "symbol": "ES",
                  "section1256": true,
                  "recommendation": "KEEP",
                  "taxAdvantage": "60/40 treatment",
                  "estimatedSavings": "~17% tax savings"
                },
                {
                  "symbol": "MES",
                  "section1256": true,
                  "recommendation": "KEEP",
                  "taxAdvantage": "60/40 treatment",
                  "estimatedSavings": "~17% tax savings"
                }
              ],
              "section1256Ratio": 1,
              "optimizationScore": 100,
              "preferredInstruments": [
                "ES",
                "MES"
              ]
            },
            {
              "strategy": "STRANGLE",
              "recommendations": [
                {
                  "symbol": "ES",
                  "section1256": true,
                  "recommendation": "KEEP",
                  "taxAdvantage": "60/40 treatment",
                  "estimatedSavings": "~17% tax savings"
                },
                {
                  "symbol": "GC",
                  "section1256": true,
                  "recommendation": "KEEP",
                  "taxAdvantage": "60/40 treatment",
                  "estimatedSavings": "~17% tax savings"
                },
                {
                  "symbol": "CL",
                  "section1256": true,
                  "recommendation": "KEEP",
                  "taxAdvantage": "60/40 treatment",
                  "estimatedSavings": "~17% tax savings"
                }
              ],
              "section1256Ratio": 1,
              "optimizationScore": 100,
              "preferredInstruments": [
                "ES",
                "GC",
                "CL"
              ]
            },
            {
              "strategy": "IPMCC",
              "recommendations": [
                {
                  "symbol": "SPY",
                  "section1256": false,
                  "recommendation": "SWITCH",
                  "taxAdvantage": "Regular treatment",
                  "estimatedSavings": "No tax advantage"
                },
                {
                  "symbol": "QQQ",
                  "section1256": false,
                  "recommendation": "SWITCH",
                  "taxAdvantage": "Regular treatment",
                  "estimatedSavings": "No tax advantage"
                }
              ],
              "section1256Ratio": 0,
              "optimizationScore": 0,
              "preferredInstruments": []
            }
          ]
        }
      }
    ],
    "complianceTests": [
      {
        "test": "Compliance and Accuracy",
        "passed": true,
        "details": {
          "testCases": 3,
          "passRate": 100,
          "results": [
            {
              "name": "Section 1256 Classification Accuracy",
              "passed": true,
              "accuracy": 100,
              "details": "6/6 correct classifications"
            },
            {
              "name": "Wash Sale Detection Accuracy",
              "passed": true,
              "details": "Detected 1 wash sale violations",
              "expectedViolations": 1,
              "actualViolations": 1
            },
            {
              "name": "UK Tax Calculation Accuracy",
              "passed": true,
              "details": "£6090 gains, 80% allowance used",
              "withinAllowance": false
            }
          ]
        }
      }
    ]
  }
}